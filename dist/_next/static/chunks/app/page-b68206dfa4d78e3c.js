(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2468:(e,t,a)=>{Promise.resolve().then(a.bind(a,9321))},6059:(e,t,a)=>{"use strict";a.d(t,{$:()=>o});var s=a(716);a(2912);var r=a(7089),n=a(8694),i=a(8888);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-transparent",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:a,size:n,asChild:o=!1,...c}=e,d=o?r.DX:"button";return(0,s.jsx)(d,{"data-slot":"button",className:(0,i.cn)(l({variant:a,size:n,className:t})),...c})}},6201:(e,t,a)=>{"use strict";a.d(t,{Wu:()=>i,Zp:()=>n,wL:()=>l});var s=a(716);a(2912);var r=a(8888);function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-background text-background-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function i(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...a})}function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-footer",className:(0,r.cn)("flex items-center px-6 [.border-t]:pt-6",t),...a})}},9321:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ti});var s=a(716),r=a(2912),n=a(9933),i=a(7822);let l="https://raw.communitydragon.org/latest/plugins/rcp-be-lol-game-data/global/default";function o(e){let t=(e.startsWith("/")?e.slice(1):e).replace("lol-game-data/assets/","").toLowerCase();return"".concat(l,"/").concat(t)}async function c(){let e=await fetch("".concat(l,"/v1/champion-summary.json"));if(!e.ok)throw Error("Failed to fetch champion summaries");return await e.json()}async function d(e){let t=await fetch("".concat(l,"/v1/champions/").concat(e,".json"));if(!t.ok)throw Error("Failed to fetch details for champion ".concat(e));return await t.json()}async function u(e,t){let a=await fetch("".concat("https://raw.githubusercontent.com/darkseal-org/lol-skins-developer/main","/").concat(e,"/").concat(t,".fantome"));if(!a.ok)throw Error("Failed to fetch fantome file for champion ".concat(e,", skin ").concat(t));return new Uint8Array(await a.arrayBuffer())}function m(e){return e.toLowerCase().trim().replace(/[/\\:?*"<>| ]+/g,"_").replace(/_+/g,"_").replace(/^_+|_+$/g,"")}let h=e=>new Promise(t=>setTimeout(t,e));function f(){let[e,t]=(0,r.useState)(!1),[a,s]=(0,r.useState)(null),l=(0,r.useCallback)(async()=>{if(e)return;let a=(0,i.oR)("Updating data...");try{t(!0),s({currentChampion:"",totalChampions:0,processedChampions:0,status:"checking",progress:0});let e=await (0,n.lA)("check_data_updates");if(!await (0,n.lA)("check_champions_data")||e.updatedChampions&&e.updatedChampions.length>0){let e=(await c()).filter(e=>e.id>0),t=e.length;s(e=>({...e,totalChampions:t,status:"downloading"})),i.oR.dismiss(a);let r=(0,i.oR)("Downloading champions data"),l=0;for(let a=0;a<e.length;a+=10){let c=e.slice(a,a+10).map(async e=>{try{s(a=>({...a,currentChampion:e.name,processedChampions:l,status:"processing",progress:l/t*100}));let a=await d(e.id),c=a.skins.filter((e,t)=>t>0).map(async t=>{try{let a=t.id%1e3,s=await u(e.id,a);if(await (0,n.lA)("save_fantome_file",{championName:m(e.name),skinName:m(t.name),isChroma:!1,content:Array.from(s)}),t.chromas&&t.chromas.length>0){let a=t.chromas.map(async a=>{let s=a.id%1e3,r=await u(e.id,s);await (0,n.lA)("save_fantome_file",{championName:m(e.name),skinName:m(t.name),isChroma:!0,chromaId:a.id,content:Array.from(r)})});await Promise.all(a)}}catch(a){console.error("Failed to process fantome file for ".concat(e.name," ").concat(t.name,":"),a)}});await Promise.all(c);let h=function(e,t,a){let s=m(e.name),r=t.skins.map(e=>{var t,a;e.id;let r=(null!=(t=e.chromas)?t:[]).map(t=>(t.id,{id:t.id,name:t.name,skinChromaPath:o(t.chromaPath),colors:t.colors,description:t.description,rarity:t.rarity,fantome:"".concat(s,"/").concat(m(e.name),"_chroma_").concat(t.id,".fantome")}));return{id:e.id,name:e.name,skinSrc:o(e.loadScreenPath),isBase:e.isBase,skinType:e.skinType,rarity:e.rarity||"kNoRarity",featuresText:null!=(a=e.featuresText)?a:null,fantome:"".concat(s,"/").concat(m(e.name),".fantome"),chromas:r}});return{id:e.id,name:e.name,alias:e.alias,iconSrc:o(e.squarePortraitPath),skins:r,lastUpdated:Date.now()}}(e,a,new Map);if(h.id<=0)throw Error("Invalid champion ID: ".concat(h.id));if(await (0,n.lA)("update_champion_data",{championName:m(h.name),data:JSON.stringify(h)}),l++,s(a=>({...a,currentChampion:e.name,processedChampions:l,status:"processing",progress:l/t*100})),l%5==0){i.oR.dismiss(r);let a=Math.floor(l/t*100);(0,i.oR)("".concat(l,"/").concat(t," (").concat(a,"%) - Current: ").concat(e.name))}}catch(t){console.error("Failed to process ".concat(e.name,":"),t),i.oR.error("Failed to process ".concat(e.name))}});await Promise.all(c),a+10<e.length&&await h(500)}l!==t&&console.warn("Processed ".concat(l," out of ").concat(t," champions")),i.oR.dismiss(r),i.oR.success("Data updated successfully")}else i.oR.dismiss(a),i.oR.success("Champion data is already up to date")}catch(e){i.oR.dismiss(a),console.error("Data update failed:",e),i.oR.error("Failed to update data")}finally{t(!1),s(null)}},[e]);return{isUpdating:e,progress:a,updateData:l}}var x=a(376);function p(){let{leaguePath:e}=(0,x.T)(),[t,a]=(0,r.useState)([]),[s,i]=(0,r.useState)(!0),[l,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(null);return(0,r.useEffect)(()=>{e&&(i(!0),o(null),t());async function t(){try{let e=await (0,n.lA)("check_champions_data");if(d(e),!e){o("No champion data found. Please run the data update first."),i(!1);return}let t=await (0,n.lA)("get_champion_data",{championId:0});if(!t)throw Error("No data received from the backend");let s=JSON.parse(t);if(!Array.isArray(s))throw Error("Invalid data format: expected an array of champions");a(s),o(null)}catch(e){console.error("Failed to load champions:",e),o(e instanceof Error?e.message:"Failed to load champions"),a([])}finally{i(!1)}}},[e]),{champions:t,loading:s,error:l,hasData:c}}var g=a(6059);function b(){let[e,t]=(0,r.useState)(!1),[a,s]=(0,r.useState)(!1),{updateData:i}=f(),{setLeaguePath:l,selectSkin:o,setFavorites:c}=(0,x.T)();return(0,r.useEffect)(()=>{let r=!0;async function d(){try{let{league_path:e,skins:d,favorites:u}=await (0,n.lA)("load_config");if(e&&(l(e),(null!=d?d:[]).forEach(e=>{"object"==typeof e&&null!==e&&"champion_id"in e&&"skin_id"in e&&o(e.champion_id,e.skin_id,e.chroma_id,e.fantome)}),u&&c(new Set(u)),(0,n.lA)("start_auto_inject",{leaguePath:e})),!a&&r){let e=!await (0,n.lA)("check_champions_data");console.log("Needs update:",e),e&&(console.log("Starting data update..."),s(!0),await i())}r&&t(!0)}catch(e){console.error("Failed to initialize:",e),r&&t(!0)}}return e||d(),()=>{r=!1}},[e,a,i,l,o,c]),{isInitialized:e,hasStartedUpdate:a,setHasStartedUpdate:s}}function v(){let[e,t]=(0,r.useState)(!1),{isInitialized:a}=b(),l=(0,x.T)(e=>e.leaguePath),o=(0,x.T)(e=>e.setLeaguePath),c=async()=>{try{t(!0);let e=await (0,n.lA)("select_league_directory");e&&(o(e),i.oR.success("League of Legends directory selected successfully"))}catch(e){console.error("Failed to select League directory:",e),i.oR.error("Failed to select directory")}finally{t(!1)}},d=async()=>{try{t(!0);let e=await (0,n.lA)("auto_detect_league");e&&(o(e),i.oR.success("League of Legends installation found"))}catch(e){console.error("Failed to detect League directory:",e),i.oR.error("Could not find League of Legends installation automatically")}finally{t(!1)}};return a?(0,s.jsx)("main",{className:"flex min-h-full flex-col items-center justify-center p-24",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Welcome to League Skin Manager"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Please select your League of Legends installation directory to continue"}),(0,s.jsxs)("div",{className:"flex flex-col gap-4 items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(g.$,{onClick:()=>void d(),disabled:e,variant:"default",children:e?"Detecting...":"Auto-Detect"}),(0,s.jsx)(g.$,{onClick:()=>void c(),disabled:e,variant:"outline",children:e?"Selecting...":"Browse"})]}),l&&(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Found at: ",l]})]})]})}):null}var j=a(2254),y=a(8214),N=a(9819),w=a(8091),k=a(8888);function C(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"skeleton",className:(0,k.cn)("bg-accent animate-pulse",t),...a})}var S=a(6201),A=a(8341),_=a(5948);function z(e){let{champion:t,isSelected:a,isFavorite:r,onToggleFavorite:n,onClick:i}=e;return(0,s.jsxs)(S.Zp,{className:(0,k.cn)("relative aspect-square cursor-pointer overflow-hidden transition-all p-0 rounded-none",a&&"ring ring-primary"),onClick:i,children:[(0,s.jsx)("button",{className:"absolute top-1 right-1 p-1 hover:bg-background/80 rounded-full",onClick:e=>{e.stopPropagation(),n()},children:(0,s.jsx)(_.A,{size:16,className:(0,k.cn)("transition-colors",r?"fill-primary text-primary":"text-muted-foreground")})}),(0,s.jsx)(A.default,{src:t.iconSrc,alt:t.name,className:"size-full object-cover",loading:"lazy",width:64,height:64,unoptimized:!0})]})}function I(){return(0,s.jsx)("div",{className:"w-full h-fit mx-auto grid grid-cols-3 md:grid-cols-4 xl:grid-cols-5 gap-2",children:Array.from({length:45}).map((e,t)=>(0,s.jsx)(C,{className:"aspect-square size-[64px]"},t))})}function L(e){let{champions:t,selectedChampion:a,favorites:r,onSelectChampion:n,onToggleFavorite:i}=e;if(0===t.length)return(0,s.jsx)(I,{});let l=[...t].sort((e,t)=>{let a=+!!r.has(e.id);return!!r.has(t.id)-a});return(0,s.jsx)("div",{className:"w-fit mx-auto grid grid-cols-3 md:grid-cols-4 xl:grid-cols-5 gap-2",children:l.map(e=>(0,s.jsx)(z,{champion:e,isSelected:a===e.id,isFavorite:r.has(e.id),onToggleFavorite:()=>{i(e.id)},onClick:()=>{n(e.id)}},e.id))})}function R(e){let{chromas:t,onSelect:a,selectedChromaId:r}=e,n="conic-gradient(".concat(t.map((e,a)=>{var s;return"".concat(null!=(s=e.colors[0])?s:"#fff"," ").concat(100*a/t.length,"% ").concat((a+1)*100/t.length,"%")}).join(", "),")");return(0,s.jsxs)("div",{className:"relative flex flex-col items-center group",children:[(0,s.jsx)("div",{className:(0,k.cn)("size-7 rounded-full border border-primary shadow cursor-pointer"),style:{background:n}}),(0,s.jsx)("div",{className:(0,k.cn)("absolute left-1/2 -translate-x-1/2 flex flex-col gap-1 z-30 opacity-0 translate-y-4 pointer-events-none group-hover:opacity-100 group-hover:-translate-y-0 pb-8 group-hover:pointer-events-auto transition-all duration-300 origin-bottom"),style:{bottom:0,filter:"drop-shadow(0 4px 12px rgba(0,0,0,0.18))"},children:t.map(e=>(0,s.jsx)("button",{type:"button",className:(0,k.cn)("w-6 h-6 rounded-full border flex items-center justify-center transition-all duration-200 bg-white/10 cursor-pointer relative",r===e.id&&"border-2 border-primary"),style:{background:"linear-gradient(135deg, ".concat(e.colors.join(", "),")"),boxShadow:"0 1px 4px 0 rgba(0,0,0,0.10)"},onClick:t=>{t.stopPropagation(),a(e)}},e.id))})]})}var F=a(1096),T=a(5086);let E=r.memo(function(e){var t,a;let{championId:n,skin:i}=e,{cardRef:l,selectedChroma:o,isHovering:c,imgLoaded:d,isSelected:u,currentImageSrc:m,handleMouseEnter:h,handleMouseLeave:f,handleClick:p,handleChromaSelect:g,setImgLoaded:b}=function(e,t){var a;let{selectedSkins:s,selectSkin:n,clearSelection:i}=(0,x.T)(),l=s.get(e),[o,c]=(0,r.useState)(()=>{if((null==l?void 0:l.skinId)===t.id&&l.chromaId){var e;return null!=(e=t.chromas.find(e=>e.id===l.chromaId))?e:null}return null}),[d,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!1),f=(0,r.useRef)(null),p=(null==l?void 0:l.skinId)===t.id&&(o?l.chromaId===o.id:!l.chromaId),g=null!=(a=null==o?void 0:o.skinChromaPath)?a:t.skinSrc,b=(0,r.useCallback)(()=>{u(!0),t.chromas.forEach(e=>{e.skinChromaPath&&(new window.Image().src=e.skinChromaPath)})},[t.chromas]);return(0,r.useEffect)(()=>{h(!1)},[g]),{cardRef:f,selectedChroma:o,setSelectedChroma:c,isHovering:d,setIsHovering:u,imgLoaded:m,setImgLoaded:h,isSelected:p,currentImageSrc:g,handleMouseEnter:b,handleMouseLeave:()=>{u(!1)},handleClick:()=>{if(p)i(e);else{var a;n(e,t.id,null==o?void 0:o.id,null!=(a=null==o?void 0:o.fantome)?a:t.fantome)}},handleChromaSelect:a=>{if(o&&a&&o.id===a.id)c(null),n(e,t.id,void 0,t.fantome);else{var s;c(a),n(e,t.id,null==a?void 0:a.id,null!=(s=null==a?void 0:a.fantome)?s:t.fantome)}}}}(n,i);return(0,s.jsxs)(S.Zp,{ref:l,className:(0,k.cn)("size-full relative cursor-pointer p-0 rounded-none overflow-hidden transition-all duration-300",u?"ring-2 ring-primary":""),onClick:p,onMouseEnter:h,onMouseLeave:f,children:[!d&&(0,s.jsx)(C,{className:"absolute inset-0 w-full h-full"}),m&&(0,s.jsx)(A.default,{src:m,alt:null!=(t=null==o?void 0:o.name)?t:i.name,width:308,height:560,className:(0,k.cn)("object-cover transition-opacity duration-300",d?"opacity-100":"opacity-0"),onLoad:()=>b(!0),onLoadingComplete:()=>b(!0),placeholder:"blur",blurDataURL:"/osskins-screenshot.png",priority:!1}),u&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 z-10",children:(0,s.jsx)("div",{className:"bg-primary/20 p-2 rounded-full",children:(0,s.jsx)(F.A,{className:"size-8 text-primary"})})}),!u&&c&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 z-10",children:(0,s.jsx)("div",{className:"bg-primary/20 p-2 rounded-full",children:(0,s.jsx)(T.A,{className:"size-8"})})}),(0,s.jsx)(S.wL,{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/90 via-black/60 to-transparent p-4 flex flex-col justify-end z-20",children:(0,s.jsxs)("div",{className:"w-full h-fit flex items-end justify-between gap-1",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white drop-shadow-md",children:null!=(a=null==o?void 0:o.name)?a:i.name}),i.chromas.length>0&&(0,s.jsx)(R,{chromas:i.chromas,onSelect:g,selectedChromaId:null==o?void 0:o.id})]})})]})}),P=r.memo(function(e){let{champion:t}=e;return t?(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2 md:grid-cols-4 xl:grid-cols-5 size-fit",children:t.skins.filter(e=>!e.isBase).map(e=>(0,s.jsx)(E,{championId:t.id,skin:e},e.id))}):(0,s.jsx)("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Select a champion to view their skins"})});var D=a(4097);function q(e){var t;let{skin:a,onDelete:n}=e,[l,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),u=(0,x.T)(e=>e.selectedSkins),m=(0,x.T)(e=>e.selectSkin),h=(0,x.T)(e=>e.clearSelection),f=(null==(t=u.get(a.champion_id))?void 0:t.fantome)===a.file_path,p=parseInt(a.id.replace(/\D/g,"").slice(0,8))||999999,b=()=>{i.oR.warning('Delete "'.concat(a.name,'"?'),{description:"This action cannot be undone.",duration:5e3,action:{label:"Delete",onClick:()=>{d(!0),i.oR.promise(async()=>{let e=await n(a.id);if(!e)throw Error("Failed to delete skin");return e},{loading:"Deleting skin...",success:'"'.concat(a.name,'" was deleted successfully'),error:"Failed to delete skin"})}}})};return(0,s.jsxs)(g.$,{className:(0,k.cn)("w-full py-6 px-1 bg-primary dark:bg-primary/20 gap-0 rounded-lg overflow-hidden transition-all duration-300",f?"ring-2 ring-primary":""),onClick:()=>{f?h(a.champion_id):m(a.champion_id,p,void 0,a.file_path)},onMouseEnter:()=>{o(!0)},onMouseLeave:()=>{o(!1)},children:[(0,s.jsxs)("div",{className:"p-2",children:[!f&&(0,s.jsx)(T.A,{className:"size-8"}),f&&(0,s.jsx)(F.A,{className:"size-8 text-primary"})]}),(0,s.jsxs)("div",{className:"flex justify-between gap-2 px-2 items-center w-full",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white drop-shadow-md",children:a.name}),(0,s.jsx)("div",{role:"button",tabIndex:0,"aria-label":"Delete ".concat(a.name),className:"h-8 w-8 rounded-full opacity-80 hover:opacity-100 flex items-center justify-center bg-destructive text-destructive-foreground cursor-pointer focus:outline-none focus:ring-2 focus:ring-destructive",onClick:e=>{e.stopPropagation(),b()},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),b())},style:{pointerEvents:c?"none":void 0,opacity:c?.5:void 0},children:(0,s.jsx)(D.A,{className:"h-4 w-4"})})]})]})}var M=a(532),U=a(2053);function O(e){let{...t}=e;return(0,s.jsx)(U.bL,{"data-slot":"dialog",...t})}function $(e){let{...t}=e;return(0,s.jsx)(U.l9,{"data-slot":"dialog-trigger",...t})}function K(e){let{...t}=e;return(0,s.jsx)(U.ZL,{"data-slot":"dialog-portal",...t})}function Y(e){let{...t}=e;return(0,s.jsx)(U.bm,{"data-slot":"dialog-close",...t})}function B(e){let{className:t,...a}=e;return(0,s.jsx)(U.hJ,{"data-slot":"dialog-overlay",className:(0,k.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function V(e){let{className:t,children:a,...r}=e;return(0,s.jsxs)(K,{"data-slot":"dialog-portal",children:[(0,s.jsx)(B,{}),(0,s.jsx)(U.UC,{"data-slot":"dialog-content",className:(0,k.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...r,children:a})]})}function W(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,k.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function J(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-footer",className:(0,k.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function H(e){let{className:t,...a}=e;return(0,s.jsx)(U.hE,{"data-slot":"dialog-title",className:(0,k.cn)("text-lg leading-none font-semibold",t),...a})}function Z(e){let{className:t,...a}=e;return(0,s.jsx)(U.VY,{"data-slot":"dialog-description",className:(0,k.cn)("text-muted-foreground text-sm",t),...a})}var G=a(7787);function Q(e){let{className:t,type:a,icon:r,iconPlacement:n="left",style:i,...l}=e,o=(0,s.jsx)("input",{type:a,"data-slot":"input",className:(0,k.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground bg-background flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r?"left"===n?"pl-9":"pr-9":"",t),style:i,...l});return r?(0,s.jsxs)("div",{className:"relative flex items-center w-full",children:["left"===n&&(0,s.jsx)("span",{className:"absolute left-2 flex items-center pointer-events-none text-muted-foreground",children:r}),o,"right"===n&&(0,s.jsx)("span",{className:"absolute right-2 flex items-center pointer-events-none text-muted-foreground",children:r})]}):o}function X(){return(0,s.jsx)("div",{className:"size-full space-y-3 px-20 py-10",children:Array.from({length:3}).map((e,t)=>(0,s.jsxs)("div",{className:"w-full py-6 px-1 bg-primary/20 gap-0 rounded-lg overflow-hidden animate-pulse",children:[(0,s.jsx)("div",{className:"p-2",children:(0,s.jsx)(C,{className:"size-8"})}),(0,s.jsxs)("div",{className:"flex justify-between gap-2 px-2 items-center w-full",children:[(0,s.jsx)(C,{className:"h-6 w-32"}),(0,s.jsx)(C,{className:"size-8 rounded-full"})]})]},t))})}function ee(e){var t,a,l;let{championId:o}=e,{champions:c}=p(),{customSkins:d,uploadCustomSkin:u,deleteCustomSkin:m}=function(){let[e,t]=(0,r.useState)(!0),[a,s]=(0,r.useState)(null),{customSkins:i,setCustomSkins:l,addCustomSkin:o,removeCustomSkin:c}=(0,x.T)();return(0,r.useEffect)(()=>{(async()=>{t(!0),s(null);try{let e=await (0,n.lA)("get_custom_skins");l(e)}catch(e){console.error("Failed to load custom skins:",e),s(String(e))}finally{t(!1)}})()},[l]),{customSkins:i,isLoading:e,error:a,uploadCustomSkin:async(e,t)=>{try{let a=await (0,n.lA)("upload_custom_skin",{championId:e,skinName:t});return o(a),a}catch(e){return console.error("Failed to upload custom skin:",e),s(String(e)),null}},deleteCustomSkin:async e=>{try{return await (0,n.lA)("delete_custom_skin",{skinId:e}),c(e),!0}catch(e){return console.error("Failed to delete custom skin:",e),s(String(e)),!1}}}}(),[h,f]=(0,r.useState)(!1),[b,v]=(0,r.useState)(""),[j,y]=(0,r.useState)(!1),N=o?c.find(e=>e.id===o):null,w=null!==o&&null!=(t=d.get(o))?t:[],k=async e=>{if(e.preventDefault(),o){y(!0);try{await u(o,b)&&(f(!1),v(""),i.oR.success("Custom skin uploaded successfully"))}catch(e){i.oR.error("Failed to upload custom skin"),console.error(e)}finally{y(!1)}}},C=async e=>{try{if(await m(e))return i.oR.success("Skin deleted successfully"),!0;return i.oR.error("Failed to delete skin"),!1}catch(e){return i.oR.error("An error occurred while deleting the skin"),!1}};return o?(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(X,{}),children:(0,s.jsxs)("div",{className:"size-full space-y-3 px-20 py-10",children:[w.map(e=>(0,s.jsx)(q,{skin:e,onDelete:C},e.id)),0===w.length&&(0,s.jsx)("div",{className:"flex flex-col items-center mt-8",children:(0,s.jsxs)("p",{className:"text-muted-foreground mb-4",children:["No custom skins found for ",null!=(a=null==N?void 0:N.name)?a:"this champion","."]})}),(0,s.jsxs)(g.$,{size:"lg",variant:"outline",className:"w-full border-dashed py-6 mt-1 justify-start",onClick:()=>{if(!o)return void i.oR.error("Please select a champion first");f(!0)},children:[(0,s.jsx)(M.A,{className:"size-8 opacity-50"}),(0,s.jsx)("span",{className:"text-lg font-medium",children:"Add Custom Skin"})]}),(0,s.jsx)(O,{open:h,onOpenChange:f,children:(0,s.jsxs)(V,{className:"sm:max-w-md",children:[(0,s.jsxs)(W,{children:[(0,s.jsx)(H,{children:"Add Custom Skin"}),(0,s.jsxs)(Z,{children:["Upload a custom skin file (.fantome) for"," ",null!=(l=null==N?void 0:N.name)?l:"your champion"]})]}),(0,s.jsxs)("form",{onSubmit:k,children:[(0,s.jsx)("div",{className:"grid gap-4 py-4",children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(G.J,{htmlFor:"skinName",children:"Skin Name"}),(0,s.jsx)(Q,{id:"skinName",name:"skinName",value:b,onChange:e=>{v(e.target.value)},placeholder:"Enter a name for this skin"})]})}),(0,s.jsxs)(J,{children:[(0,s.jsx)(g.$,{type:"button",variant:"outline",onClick:()=>{f(!1),v("")},disabled:j,children:"Cancel"}),(0,s.jsx)(g.$,{type:"submit",disabled:j||!b.trim(),children:j?"Uploading...":"Upload Skin"})]})]})]})})]})}):(0,s.jsx)("div",{className:"flex flex-col items-center justify-center h-full w-full p-4",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"Please select a champion to view their custom skins."})})}var et=a(904),ea=a(1995),es=a(692),er=a(8611);function en(e){let{delayDuration:t=0,...a}=e;return(0,s.jsx)(er.Kq,{"data-slot":"tooltip-provider",delayDuration:t,...a})}function ei(e){let{...t}=e;return(0,s.jsx)(en,{children:(0,s.jsx)(er.bL,{"data-slot":"tooltip",...t})})}function el(e){let{...t}=e;return(0,s.jsx)(er.l9,{"data-slot":"tooltip-trigger",...t})}function eo(e){let{className:t,sideOffset:a=0,children:r,...n}=e;return(0,s.jsx)(er.ZL,{children:(0,s.jsxs)(er.UC,{"data-slot":"tooltip-content",sideOffset:a,className:(0,k.cn)("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...n,children:[r,(0,s.jsx)(er.i3,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var ec=a(8389);function ed(){let e=(0,x.T)(e=>e.injectionStatus),t=(0,x.T)(e=>e.setInjectionStatus),a=(0,r.useRef)({}),n=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=()=>{},s=()=>{},r=()=>{};return(async()=>{r=await (0,ec.KT)("terminal-log",e=>{let t=e.payload;(t.includes("Retrying overlay creation")||t.includes("Access violation error"))&&(n.current="retrying"),(t.includes("Overlay creation succeeded")||t.includes("Overlay process started successfully")||t.includes("Skin injection completed successfully"))&&"retrying"===n.current&&(n.current="recovered")}),e=await (0,ec.KT)("injection-status",e=>{let s=e.payload;"injecting"===s?(t("injecting"),a.current={},n.current="injecting"):"completed"===s||"success"===s?(t("success"),i.oR.dismiss(),i.oR.success("Skin injection completed successfully"),a.current.success=!0,n.current=null):"error"===s?"retrying"!==n.current&&"recovered"!==n.current&&t("error"):(t("idle"),n.current=null)}),s=await (0,ec.KT)("skin-injection-error",e=>{"retrying"!==n.current&&"recovered"!==n.current&&(t("error"),a.current.error||(i.oR.error("Skin injection failed: ".concat(e.payload)),a.current.error=!0))})})(),()=>{e(),s(),r()}},[t]),(0,r.useEffect)(()=>{if("success"===e||"error"===e){let e=setTimeout(()=>{t("idle"),a.current={},n.current=null},5e3);return()=>{clearTimeout(e)}}},[e,t]);let l="",o="",c="";switch(e){case"injecting":l="bg-yellow-400",o="animate-pulse",c="Injecting skins...";break;case"success":l="bg-green-500",c="Injection successful";break;case"error":l="bg-red-500",c="Injection failed";break;default:l="bg-gray-500",c="Ready"}return(0,s.jsxs)(ei,{children:[(0,s.jsx)(el,{asChild:!0,children:(0,s.jsx)("div",{className:"size-3 aspect-square shrink-0 rounded-full border border-border ".concat(l," ").concat(o),"aria-label":c})}),(0,s.jsx)(eo,{children:c})]})}var eu=a(1780),em=a(1804),eh=a(5884),ef=a(3913),ex=a(5583),ep=a(1828);function eg(e){let{title:t="Hindi Hwak",showIcon:a=!0,className:n=""}=e,[i,l]=(0,r.useState)(!1),[o,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=null;return(async()=>{try{let e=(0,eu.getCurrentWebviewWindow)();c(e);try{let t=await e.isMaximized();l(t)}catch(e){console.error("Failed to check if window is maximized:",e)}return await e.listen("tauri://resize",()=>{e.isMaximized().then(e=>{l(e)}).catch(e=>{console.error("Failed to check if window is maximized on resize:",e)})})}catch(e){return console.error("Failed to initialize window:",e),null}})().then(t=>{e=t}).catch(e=>{console.error("Failed to initialize window listeners:",e)}),()=>{e&&e()}},[]);let m=async()=>{try{o&&await o.minimize()}catch(e){console.error("Failed to minimize window:",e)}},h=async()=>{try{o&&(i?await o.unmaximize():await o.maximize())}catch(e){console.error("Failed to toggle maximize:",e)}},f=async()=>{try{o&&await o.close()}catch(e){console.error("Failed to close window:",e)}};return(0,s.jsxs)("div",{className:"\n        flex items-center justify-between h-12 px-4 \n        bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900\n        border-b border-slate-700/50 backdrop-blur-sm\n        ".concat(n,"\n      "),"data-tauri-drag-region":!0,children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[a&&(0,s.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 shadow-lg",children:(0,s.jsx)(em.A,{className:"h-5 w-5 text-white"})}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("h1",{className:"text-sm font-semibold text-white tracking-wide",children:t}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,s.jsx)("span",{className:"text-xs text-slate-400",children:"Ready"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(g.$,{variant:"ghost",size:"icon",className:" h-8 w-8 rounded-md text-slate-300 hover:text-white hover:bg-slate-700/50  transition-all duration-200 ease-in-out focus:ring-2 focus:ring-blue-500/50 active:scale-95 ",onClick:()=>void m(),onMouseEnter:()=>u("minimize"),onMouseLeave:()=>u(null),"aria-label":"Minimize window",children:(0,s.jsx)(eh.A,{className:"h-4 w-4"})}),(0,s.jsx)(g.$,{variant:"ghost",size:"icon",className:" h-8 w-8 rounded-md text-slate-300 hover:text-white hover:bg-slate-700/50  transition-all duration-200 ease-in-out focus:ring-2 focus:ring-blue-500/50 active:scale-95 ",onClick:()=>void h(),onMouseEnter:()=>u("maximize"),onMouseLeave:()=>u(null),"aria-label":i?"Restore window":"Maximize window",children:i?(0,s.jsx)(ef.A,{className:"h-3.5 w-3.5"}):(0,s.jsx)(ex.A,{className:"h-3.5 w-3.5"})}),(0,s.jsx)(g.$,{variant:"ghost",size:"icon",className:" h-8 w-8 rounded-md text-slate-300 hover:text-white hover:bg-red-500/80 hover:text-white transition-all duration-200 ease-in-out focus:ring-2 focus:ring-red-500/50 active:scale-95 ",onClick:()=>void f(),onMouseEnter:()=>u("close"),onMouseLeave:()=>u(null),"aria-label":"Close window",children:(0,s.jsx)(ep.A,{className:"h-4 w-4"})})]}),d&&(0,s.jsxs)("div",{className:" absolute top-14 right-4  px-2 py-1 text-xs  bg-slate-800 text-white  rounded-md shadow-lg border border-slate-600 animate-in fade-in-0 zoom-in-95 duration-150 ",children:["minimize"===d&&"Minimize","maximize"===d&&(i?"Restore":"Maximize"),"close"===d&&"Close"]})]})}function eb(e){let{champions:t,onSelect:a,selectedChampionId:n,searchQuery:i,onSearchChange:l}=e,o=(0,r.useRef)(null),[c,d]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=e=>{var t,a,s;c||e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||(1!==e.key.length||e.metaKey||e.ctrlKey||e.altKey||(e.preventDefault(),l(e.key),null==(t=o.current)||t.focus()),"Backspace"===e.key&&(e.preventDefault(),l(i.slice(0,-1)),null==(a=o.current)||a.focus()),"Escape"===e.key&&(e.preventDefault(),l(""),null==(s=o.current)||s.blur()))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[i,l,c]),(0,s.jsx)(Q,{ref:o,type:"search",icon:(0,s.jsx)(et.A,{size:16}),placeholder:"Search champions...",value:i,onFocus:()=>{d(!0)},onBlur:()=>{d(!1)},onChange:e=>{l(e.target.value)}})}var ev=a(5945);function ej(e){let{...t}=e;return(0,s.jsx)(ev.bL,{"data-slot":"dropdown-menu",...t})}function ey(e){let{...t}=e;return(0,s.jsx)(ev.l9,{"data-slot":"dropdown-menu-trigger",...t})}function eN(e){let{className:t,sideOffset:a=4,...r}=e;return(0,s.jsx)(ev.ZL,{children:(0,s.jsx)(ev.UC,{"data-slot":"dropdown-menu-content",sideOffset:a,className:(0,k.cn)("bg-background text-background-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...r})})}function ew(e){let{className:t,inset:a,variant:r="default",...n}=e;return(0,s.jsx)(ev.q7,{"data-slot":"dropdown-menu-item","data-inset":a,"data-variant":r,className:(0,k.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n})}function ek(e){let{className:t,children:a,checked:r,...n}=e;return(0,s.jsxs)(ev.H_,{"data-slot":"dropdown-menu-checkbox-item",className:(0,k.cn)("focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),checked:r,...n,children:[(0,s.jsx)("span",{className:"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(ev.VF,{children:(0,s.jsx)(F.A,{className:"size-4"})})}),a]})}var eC=a(672);function eS(e){let{className:t,children:a,...r}=e;return(0,s.jsxs)(eC.bL,{"data-slot":"scroll-area",className:(0,k.cn)("relative",t),...r,children:[(0,s.jsx)(eC.LM,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:a}),(0,s.jsx)(eA,{}),(0,s.jsx)(eC.OK,{})]})}function eA(e){let{className:t,orientation:a="vertical",...r}=e;return(0,s.jsx)(eC.VM,{"data-slot":"scroll-area-scrollbar",orientation:a,className:(0,k.cn)("flex touch-none p-px transition-colors select-none","vertical"===a&&"h-full w-2.5 border-l border-l-transparent","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent",t),...r,children:(0,s.jsx)(eC.lr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var e_=a(9464),ez=a(2192),eI=a(3427),eL=a(2644),eR=a(4883);let eF={all:"All","lcu-watcher":"LCU Watcher",injection:"Injection",error:"Error",debug:"Debug"},eT=Object.keys(eF).filter(e=>"all"!==e);function eE(){let e=(0,x.j)(e=>e.logs),t=(0,x.j)(e=>e.clearLogs),[a,n]=(0,r.useState)(eT),[l,o]=(0,r.useState)(!0),[c,d]=(0,r.useState)(!0),u=(0,r.useRef)(null),m=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(l&&c){var e;null==(e=m.current)||e.scrollIntoView({behavior:"smooth"})}},[e,l,c]);let h=(0,r.useCallback)(()=>{let e=u.current;e&&d(e.scrollHeight-e.scrollTop-e.clientHeight<20)},[]),f=async()=>{try{await navigator.clipboard.writeText(e.filter(e=>0===a.length||a.includes(e.log_type)).map(e=>"[".concat(e.log_type,"] ").concat(e.message)).join("\n")),i.oR.success("Logs copied to clipboard")}catch(e){i.oR.error("Failed to copy logs")}},p=e=>{n(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},b=e.filter(e=>0===a.length||a.includes(e.log_type));return(0,s.jsxs)(O,{modal:!0,children:[(0,s.jsx)($,{asChild:!0,children:(0,s.jsxs)(ew,{onSelect:e=>{e.preventDefault()},children:[(0,s.jsx)(e_.A,{className:"h-4 w-4"}),"Terminal Logs"]})}),(0,s.jsxs)(V,{className:"sm:max-w-5xl overflow-y-auto",children:[(0,s.jsxs)(W,{className:"flex flex-row items-center justify-between",children:[(0,s.jsx)(H,{children:"Terminal Logs"}),(0,s.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,s.jsxs)(ej,{children:[(0,s.jsx)(ey,{asChild:!0,children:(0,s.jsx)(g.$,{variant:"outline",size:"icon",title:"Filter logs",children:(0,s.jsx)(ez.A,{className:"h-4 w-4"})})}),(0,s.jsx)(eN,{align:"end",children:Object.entries(eF).filter(e=>{let[t]=e;return"all"!==t}).map(e=>{let[t,r]=e;return(0,s.jsx)(ek,{checked:a.includes(t),onCheckedChange:()=>p(t),children:r},t)})})]}),(0,s.jsx)(g.$,{title:"Copy",variant:"outline",size:"icon",onClick:()=>{f()},disabled:0===b.length,children:(0,s.jsx)(ef.A,{className:"h-4 w-4"})}),(0,s.jsx)(g.$,{title:"Clear",variant:"outline",size:"icon",onClick:t,children:(0,s.jsx)(D.A,{className:"h-4 w-4"})}),(0,s.jsx)(Y,{title:"Close",asChild:!0,children:(0,s.jsx)(g.$,{variant:"outline",size:"icon",children:(0,s.jsx)(ep.A,{className:"h-4 w-4"})})})]})]}),(0,s.jsxs)(eS,{className:"size-full relative h-[500px] max-w-[950px] rounded-md border p-4 font-mono text-sm select-text",ref:u,onScroll:h,children:[b.map((e,t)=>(0,s.jsxs)("div",{className:"whitespace-pre-wrap",children:[(0,s.jsxs)("span",{className:"text-xs font-bold mr-2",children:["[",e.log_type,"]"]}),e.message]},t)),(0,s.jsx)("div",{ref:m})]}),!c&&l&&(0,s.jsx)(g.$,{onClick:()=>{var e;null==(e=m.current)||e.scrollIntoView({behavior:"smooth"}),o(!0),d(!0)},variant:"secondary",size:"icon",className:(0,eL.A)("absolute right-4 bottom-6 z-10 shadow-lg animate-in fade-in","bg-background/80 backdrop-blur"),title:"Scroll to bottom",children:(0,s.jsx)(eI.A,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xs",children:"Auto Scroll"}),(0,s.jsx)(eR.d,{checked:l,onCheckedChange:o,"aria-label":"Auto Scroll"})]})]})]})}var eP=a(5441),eD=a(9993),eq=a(5715),eM=a(9740),eU=a(7298),eO=a(6295),e$=a(7447),eK=a(9618),eY=a(2765);function eB(e){let{className:t,orientation:a="horizontal",decorative:r=!0,...n}=e;return(0,s.jsx)(eY.b,{"data-slot":"separator-root",decorative:r,orientation:a,className:(0,k.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...n})}function eV(){let[e,t]=(0,r.useState)(!1),a=(0,x.T)(e=>e.leaguePath),l=(0,x.T)(e=>e.setLeaguePath),o=(0,x.T)(e=>e.autoUpdateData),c=(0,x.T)(e=>e.setAutoUpdateData),{isLoading:d,handleSelectDirectory:u,handleAutoDetect:m}=function(e){let[t,a]=(0,r.useState)(!1);return{isLoading:t,handleSelectDirectory:(0,r.useCallback)(async()=>{try{a(!0);let t=await (0,n.lA)("select_league_directory");t&&(e(t),i.oR.success("League of Legends directory updated successfully"))}catch(e){console.error("Failed to select League directory:",e),i.oR.error("Failed to select directory")}finally{a(!1)}},[e]),handleAutoDetect:(0,r.useCallback)(async()=>{try{a(!0);let t=await (0,n.lA)("auto_detect_league");t&&(e(t),i.oR.success("League of Legends installation found"))}catch(e){console.error("Failed to detect League directory:",e),i.oR.error("Could not find League of Legends installation automatically")}finally{a(!1)}},[e])}}(l),h=a&&a.length>0;return(0,s.jsxs)(O,{open:e,onOpenChange:t,children:[(0,s.jsx)($,{asChild:!0,children:(0,s.jsxs)(ew,{onSelect:e=>{e.preventDefault(),t(!0)},children:[(0,s.jsx)(eP.A,{className:"size-4"}),"Settings"]})}),(0,s.jsxs)(V,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(W,{className:"text-center pb-4",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-16 h-16 bg-primary/10 rounded-full mx-auto mb-4",children:(0,s.jsx)(eP.A,{className:"size-8 text-primary"})}),(0,s.jsx)(H,{className:"text-2xl font-bold",children:"Settings"}),(0,s.jsx)(Z,{className:"text-base",children:"Customize your application preferences and configuration"})]}),(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-100 rounded-lg",children:(0,s.jsx)(eD.A,{className:"size-4 text-blue-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-lg",children:"Data Management"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Control how champion data is updated"})]})]}),(0,s.jsx)("div",{className:"bg-muted/30 rounded-lg p-4 border border-border/50",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(G.J,{className:"text-sm font-medium",children:"Auto Update Champion Data"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Automatically fetch the latest champion data when available"})]}),(0,s.jsx)(eR.d,{checked:o,onCheckedChange:c,className:"data-[state=checked]:bg-green-500"})]})})]}),(0,s.jsx)(eB,{className:"my-6"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-8 h-8 bg-purple-100 rounded-lg",children:(0,s.jsx)(eq.A,{className:"size-4 text-purple-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-lg",children:"Appearance"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Customize the look and feel"})]})]}),(0,s.jsx)("div",{className:"bg-muted/30 rounded-lg p-4 border border-border/50",children:(0,s.jsx)(eK.ve,{})})]}),(0,s.jsx)(eB,{className:"my-6"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-8 h-8 bg-orange-100 rounded-lg",children:(0,s.jsx)(eM.A,{className:"size-4 text-orange-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-lg",children:"League of Legends Installation"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Configure your game directory path"})]})]}),(0,s.jsxs)("div",{className:"bg-muted/30 rounded-lg p-4 border border-border/50 space-y-4",children:[(0,s.jsx)("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-background border",children:h?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eU.A,{className:"size-4 text-green-500 flex-shrink-0"}),(0,s.jsx)("span",{className:"text-sm font-medium text-green-700",children:"Path configured"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eO.A,{className:"size-4 text-amber-500 flex-shrink-0"}),(0,s.jsx)("span",{className:"text-sm font-medium text-amber-700",children:"No path configured"})]})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(G.J,{htmlFor:"leaguePath",className:"text-sm font-medium",children:"Installation Directory"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(eM.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-muted-foreground"}),(0,s.jsx)(Q,{id:"leaguePath",value:null!=a?a:"Not configured",readOnly:!0,className:(0,k.cn)("pl-10 font-mono text-sm",h?"text-foreground":"text-muted-foreground italic"),placeholder:"League of Legends installation path..."})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,s.jsx)(g.$,{onClick:()=>void m(),disabled:d,variant:"default",className:"w-full",children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(es.A,{className:"size-4 mr-2 animate-spin"}),"Detecting..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(et.A,{className:"size-4 mr-2"}),"Auto Detect"]})}),(0,s.jsxs)(g.$,{variant:"outline",onClick:()=>void u(),disabled:d,className:"w-full",children:[(0,s.jsx)(e$.A,{className:"size-4 mr-2"}),"Browse Folder"]})]}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground bg-blue-50/50 border border-blue-200/50 rounded-lg p-3",children:[(0,s.jsx)("strong",{children:"Tip:"})," The League of Legends installation is typically located in:",(0,s.jsx)("br",{}),"• ",(0,s.jsx)("code",{className:"bg-muted px-1 rounded",children:"C:\\Riot Games\\League of Legends"}),(0,s.jsx)("br",{}),"• ",(0,s.jsx)("code",{className:"bg-muted px-1 rounded",children:"C:\\Program Files\\Riot Games\\League of Legends"})]})]})]})]}),(0,s.jsxs)("div",{className:"pt-6 border-t border-border/50",children:[(0,s.jsx)("div",{className:"text-center mb-6",children:(0,s.jsxs)("div",{className:"inline-flex items-center gap-2 text-sm bg-gradient-to-r from-pink-50 to-red-50 border border-pink-200/50 rounded-full px-4 py-2",children:[(0,s.jsx)(_.A,{className:"size-4 text-red-500 fill-red-500"}),(0,s.jsx)("span",{className:"text-muted-foreground",children:"Made with love by"}),(0,s.jsx)("strong",{className:"text-gray-900 font-semibold",children:"MOUSSAID & FEITAN"}),(0,s.jsx)("a",{href:"#",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:text-blue-800 transition-colors underline decoration-dotted"})]})}),(0,s.jsxs)(J,{className:"flex-col sm:flex-row gap-2",children:[(0,s.jsx)(Y,{asChild:!0,children:(0,s.jsx)(g.$,{variant:"outline",className:"flex-1",children:"Cancel"})}),(0,s.jsx)(Y,{asChild:!0,children:(0,s.jsx)(g.$,{variant:"default",className:"flex-1",children:"Save & Close"})})]})]})]})]})}var eW=a(7312),eJ=a(2838),eH=a(8834),eZ=a(330),eG=a(465);let eQ=e=>{try{let t=JSON.stringify(e),a=eG.Ay.deflate(t);return btoa(String.fromCharCode.apply(null,a))}catch(e){throw console.error("Failed to compress skin data:",e),Error("Failed to compress skin data")}},eX=e=>{try{let t=function(e){try{if(!e||"string"!=typeof e)return null;let t=e.replace(/[^A-Za-z0-9+/=]/g,"");for(;t.length%4!=0;)t+="=";try{let e=atob(t),a=new Uint8Array(e.length);for(let t=0;t<e.length;t++)a[t]=e.charCodeAt(t);return a}catch(e){return null}}catch(e){return null}}(e);if(!t)throw Error("Invalid base64 string");try{let e=eG.Ay.inflate(t),a=new TextDecoder().decode(e);return JSON.parse(a)}catch(e){throw console.error("Failed to decompress skin data:",e),Error("Failed to decompress skin data")}}catch(t){throw console.error("Base64 validation failed for: ".concat(null==e?void 0:e.substring(0,20),"... (length: ").concat((null==e?void 0:e.length)||0,")")),t}};var e0=a(258);function e1(e){let{...t}=e;return(0,s.jsx)(e0.bL,{"data-slot":"alert-dialog",...t})}function e2(e){let{className:t,...a}=e;return(0,s.jsx)(e0.hE,{"data-slot":"alert-dialog-title",className:(0,k.cn)("text-lg font-semibold",t),...a})}function e5(e){let{className:t,...a}=e;return(0,s.jsx)(e0.VY,{"data-slot":"alert-dialog-description",className:(0,k.cn)("text-muted-foreground text-sm",t),...a})}function e4(e){let{members:t,onRemove:a,getAvailabilityColor:r}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"text-sm font-medium",children:["Active Party (",t.length,"/5)"]}),t.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg bg-primary/10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"h-3 w-3 rounded-full ".concat(r(e.availability))}),(0,s.jsx)("span",{children:e.name})]}),(0,s.jsx)(g.$,{size:"sm",variant:"destructive",onClick:()=>a(e.id),children:"Remove"})]},e.id)),(0,s.jsx)(eB,{className:"my-2"})]})}function e8(e){let{friends:t,activePartyMembers:a,onSync:r,getAvailabilityColor:n}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Available Friends"}),t.filter(e=>!a.some(t=>t.id===e.id)).map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-primary/5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"h-3 w-3 rounded-full ".concat(n(e.availability))}),(0,s.jsx)("span",{children:e.name}),e.game&&(0,s.jsx)("span",{className:"text-xs text-muted-foreground ml-1",children:e.game})]}),(0,s.jsx)(g.$,{size:"sm",variant:"outline",onClick:()=>r(e.id,e.name),children:"Sync"})]},e.id))]})}let e3=r.memo(function(){let[e,t]=(0,r.useState)(!1),[a,l]=(0,r.useState)(!1),o=(0,x.T)(e=>e.leaguePath);(0,x.T)(e=>e.selectedSkins);let{sendSyncRequest:c,acceptSync:d,rejectSync:u,pendingSyncRequest:m,activePartyMembers:h,checkPendingSyncRequests:f}=function(){let{selectedSkins:e,partyMembers:t,pendingSyncRequest:a,addPartyMember:s,removePartyMember:l,updatePartyMemberSkins:o,setPendingSyncRequest:c,leaguePath:d}=(0,x.T)(),u=(0,r.useRef)(!1),m=(0,r.useRef)(0),h=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!d)return;let t=Date.now();if(e||!(t-m.current<3e4)){m.current=t,console.log("Checking for pending skin sync requests...");try{let e=await (0,n.lA)("get_lcu_friends",{leaguePath:d});for(let t of(console.log("Found ".concat(e.length," friends to check for sync requests")),e))try{console.log("Checking messages from ".concat(t.name," (").concat(t.id,")"));let e=await (0,n.lA)("get_lcu_messages",{leaguePath:d,friendId:t.id});if(Array.isArray(e)){console.log("Found ".concat(e.length," messages with ").concat(t.name));for(let s=e.length-1;s>=0;s--){let r=e[s];if("string"==typeof r.body&&r.body.includes("[OSS-SKIN-SYNC]")){let e=r.body.match(/\[OSS-SKIN-SYNC\](.*?)\[\/OSS-SKIN-SYNC\]/);if(e&&e[1])try{let s=eX(e[1]);if("request"===s.requestType&&(console.log("Found sync request from ".concat(t.name)),!a||a.memberId!==t.id)){c({memberId:t.id,memberName:t.name,data:e[1]}),i.oR.info("You have a pending sync request from ".concat(t.name));return}}catch(e){console.error("Failed to decode sync request:",e);continue}}}}}catch(e){console.error("Error checking messages with ".concat(t.name,":"),e);continue}console.log("No pending skin sync requests found")}catch(e){console.error("Error checking for sync requests:",e)}}},[d,a,c]);(0,r.useEffect)(()=>{d&&h(!0)},[d,h]),(0,r.useEffect)(()=>{if(!d)return;let e=setInterval(()=>{f()},1e4);return()=>{clearInterval(e)}},[d]),(0,r.useEffect)(()=>{d&&!u.current&&(u.current=!0,(async()=>{try{for(let e of(await (0,n.lA)("get_lcu_friends",{leaguePath:d}))){let t=await (0,n.lA)("get_lcu_messages",{leaguePath:d,friendId:e.id});if(Array.isArray(t))for(let s=t.length-1;s>=0;s--){let r=t[s];if("string"==typeof r.body&&r.body.includes("[OSS-SKIN-SYNC]")){let t=r.body.match(/\[OSS-SKIN-SYNC\](.*?)\[\/OSS-SKIN-SYNC\]/);if(t&&t[1])try{let s=eX(t[1]);if("request"===s.requestType&&(!a||a.memberId!==e.id)){c({memberId:e.id,memberName:e.name,data:t[1]}),i.oR.info("You have a pending sync request from ".concat(e.name));return}}catch(e){continue}}}}}catch(e){}})())},[d,c,a,eX]);let f=(0,r.useCallback)(async()=>{if(!d||t.length>=4)return},[d,t,a]),p=(0,r.useCallback)(async(a,r)=>{try{if(t.length>=4)return i.oR.error("Party can have a maximum of 5 members"),Promise.reject("Party size limit reached");if(!d)return i.oR.error("League path not set. Please configure your League of Legends path in settings."),Promise.reject("League path not set");let l=Array.from(e.values()).map(e=>({championId:e.championId,skinId:e.skinId,chromaId:e.chromaId||null,fantome:e.fantome||null})),o=eQ({userSkins:l,requestType:"request",version:1});try{await (0,n.lA)("send_lcu_message",{leaguePath:d,friendId:a,message:"[OSS-SKIN-SYNC]".concat(o,"[/OSS-SKIN-SYNC]")}),s({id:a,name:r,availability:"online",skins:new Map}),i.oR.success("Sync request sent to ".concat(r))}catch(e){return console.error("Failed to send LCU message:",e),i.oR.error("Could not send message to ".concat(r,". Make sure League of Legends is running.")),Promise.reject(e)}return Promise.resolve()}catch(e){return console.error("Failed to send sync request:",e),Promise.reject(e)}},[e,t,eQ,s,d]),g=(0,r.useCallback)(async(t,r)=>{try{if(!a)return;let l=eX(a.data);console.log("Decoded skin data:",l);let o=new Map;if(l.userSkins.forEach(e=>{o.set(e.championId,{championId:e.championId,skinId:e.skinId,chromaId:e.chromaId||void 0,fantome:e.fantome||void 0})}),s({id:t,name:r,availability:"online",skins:o}),c(null),d){let a={userSkins:Array.from(e.values()).map(e=>({championId:e.championId,skinId:e.skinId,chromaId:e.chromaId||null,fantome:e.fantome||null})),requestType:"accept",version:1},s=eQ(a);try{await (0,n.lA)("send_lcu_message",{leaguePath:d,friendId:t,message:"[OSS-SKIN-SYNC]".concat(s,"[/OSS-SKIN-SYNC]")})}catch(e){console.error("Failed to send acceptance message:",e),i.oR.error("Accepted the request, but couldn't send confirmation to ".concat(r))}}i.oR.success("Accepted sync request from ".concat(r))}catch(e){console.error("Failed to accept sync request:",e),c(null),i.oR.error("Failed to accept sync request from ".concat(r))}},[a,eX,s,e,c,eQ,d]),b=(0,r.useCallback)(e=>{if(l(e),a&&a.memberId===e){if(c(null),d)try{let t=eQ({userSkins:[],requestType:"reject",version:1});(0,n.lA)("send_lcu_message",{leaguePath:d,friendId:e,message:"[OSS-SKIN-SYNC]".concat(t,"[/OSS-SKIN-SYNC]")})}catch(e){console.error("Failed to send rejection:",e)}i.oR.info("Rejected sync request")}else i.oR.info("Removed player from party")},[a,l,c,eQ,d]),v=(0,r.useCallback)((e,a,s)=>{let r=e.match(/\[OSS-SKIN-SYNC\](.*?)\[\/OSS-SKIN-SYNC\]/);if(r&&r[1])try{let e=r[1],n=eX(e);switch(n.requestType){case"request":c({memberId:a,memberName:s,data:e}),i.oR.info("Received sync request from ".concat(s));break;case"accept":if(t.some(e=>e.id===a)){let e=new Map;n.userSkins.forEach(t=>{e.set(t.championId,{championId:t.championId,skinId:t.skinId,chromaId:t.chromaId||void 0,fantome:t.fantome||void 0})}),o(a,e),i.oR.success("".concat(s," accepted your sync request"))}break;case"reject":l(a),i.oR.info("".concat(s," rejected your sync request"))}}catch(e){console.error("Failed to process skin sync message:",e)}},[eX,c,t,o,l]),j=(0,r.useCallback)(e=>{for(let a of t)if(a.skins.has(e))return a.skins.get(e);return null},[t]),y=(0,r.useCallback)(async t=>{try{let a=e.get(t),s=j(t);if(!a&&!s)return;let r=a||s;r&&d&&(await (0,n.lA)("inject_skins",{app:window.__TAURI__,request:{league_path:d,skins:[{champion_id:r.championId,skin_id:r.skinId,chroma_id:r.chromaId,fantome_path:r.fantome}]}}),s&&!a&&i.oR.info("Using party member's skin for champion ".concat(t)))}catch(e){console.error("Failed to inject party skin for champion ".concat(t,":"),e),i.oR.error("Failed to inject skin for champion ".concat(t))}},[e,t,d,j]);return{activePartyMembers:t,pendingSyncRequest:a,sendSyncRequest:p,acceptSync:g,rejectSync:b,handleIncomingMessage:v,injectWithPartySkins:y,getPartySkinForChampion:j,checkPendingSyncRequests:h}}(),{friends:p,isLoading:b,fetchFriends:v}=function(e){let[t,a]=(0,r.useState)([]),[s,l]=(0,r.useState)(!1);return{friends:t,isLoading:s,fetchFriends:(0,r.useCallback)(async()=>{if(l(!0),!e){i.oR.error("League path not set. Please set your League of Legends path in settings."),l(!1);return}try{let t=(await (0,n.lA)("get_lcu_friends",{app:window.__TAURI__,leaguePath:e})).map(e=>({name:e.name,id:e.id,availability:"chat"===e.availability?"online":"dnd"===e.availability||"away"===e.availability?"away":"offline"===e.availability?"offline":"mobile"===e.availability?"away":"online",game:e.gameTag||void 0}));a(t)}catch(e){a([{name:"SummonerOne",id:"friend1",availability:"online"},{name:"SummonerTwo",id:"friend2",availability:"in-game",game:"League of Legends"},{name:"SummonerThree",id:"friend3",availability:"away"}]),i.oR.error("League client not detected. Using demo friends list.")}finally{l(!1)}},[e])}}(o);(0,r.useEffect)(()=>{e&&(v(),j())},[e]);let j=async()=>{if(!o)return void i.oR.error("League path not set. Please configure your League of Legends path in settings.");l(!0);try{await f(!0),i.oR.info("Checked for pending sync requests")}catch(e){console.error("Error checking for pending requests:",e)}finally{l(!1)}},y=async(e,t)=>{try{await c(e,t),i.oR.success("Sync request sent to ".concat(t))}catch(e){console.error("Failed to send sync request to ".concat(t,":"),e),i.oR.error("Failed to send sync request to ".concat(t))}},N=e=>{switch(e){case"online":return"bg-green-500";case"away":return"bg-yellow-500";case"in-game":return"bg-blue-500";default:return"bg-gray-500"}};return(0,s.jsxs)(O,{open:e,onOpenChange:t,children:[(0,s.jsx)($,{asChild:!0,children:(0,s.jsxs)(ew,{onSelect:e=>{e.preventDefault(),t(!0)},children:[(0,s.jsx)(eW.A,{className:"h-4 w-4"}),"Party Mode"]})}),(0,s.jsxs)(V,{className:"sm:max-w-md",children:[(0,s.jsxs)(W,{children:[(0,s.jsxs)(H,{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:"Party Mode"}),(0,s.jsxs)(g.$,{variant:"outline",size:"sm",onClick:j,disabled:a||!o,children:[(0,s.jsx)(eJ.A,{className:"h-4 w-4 mr-2 ".concat(a?"animate-spin":"")}),"Check Invites"]})]}),(0,s.jsx)(Z,{children:"Share your skin selections with friends. When in a party, each player will see the others' selected skins."})]}),m&&(0,s.jsxs)(e1,{children:[(0,s.jsxs)(e2,{children:["Sync Request from"," ",m.memberName||m.memberId]}),(0,s.jsxs)(e5,{children:[m.memberName||m.memberId," ","wants to sync skin selections with you. Accept to see each other's skins in game."]}),(0,s.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,s.jsxs)(g.$,{onClick:()=>d(m.memberId,m.memberName||m.memberId),size:"sm",children:[(0,s.jsx)(eH.A,{className:"mr-2 h-4 w-4"}),"Accept"]}),(0,s.jsxs)(g.$,{onClick:()=>u(m.memberId),variant:"outline",size:"sm",children:[(0,s.jsx)(eZ.A,{className:"mr-2 h-4 w-4"}),"Decline"]})]})]}),(0,s.jsx)("div",{className:"grid gap-4 py-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(G.J,{children:["Friends (",p.length,")"]}),(0,s.jsx)(g.$,{variant:"ghost",size:"sm",onClick:v,disabled:b,children:(0,s.jsx)(es.A,{className:"h-4 w-4 ".concat(b?"animate-spin":"")})})]}),(0,s.jsx)(eS,{className:"h-72 rounded-md border",children:0===p.length?(0,s.jsx)("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground p-4",children:b?"Loading friends...":"No friends found"}):(0,s.jsxs)("div",{className:"p-4 space-y-2",children:[h.length>0&&(0,s.jsx)(e4,{members:h,onRemove:u,getAvailabilityColor:N}),(0,s.jsx)(e8,{friends:p,activePartyMembers:h,onSync:y,getAvailabilityColor:N})]})})]})}),(0,s.jsx)(J,{children:(0,s.jsx)(Y,{asChild:!0,children:(0,s.jsx)(g.$,{variant:"default",children:"Close"})})})]})]})});var e6=a(2106);function e9(e){let{className:t,...a}=e;return(0,s.jsx)(e6.bL,{"data-slot":"tabs",className:(0,k.cn)("flex flex-col gap-2",t),...a})}function e7(e){let{className:t,...a}=e;return(0,s.jsx)(e6.B8,{"data-slot":"tabs-list",className:(0,k.cn)("bg-background text-primary-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...a})}function te(e){let{className:t,...a}=e;return(0,s.jsx)(e6.l9,{"data-slot":"tabs-trigger",className:(0,k.cn)("data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring data-[state=active]:bg-primary/30 text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a})}let tt=r.memo(function(e){let{champions:t,selectedChampionId:l,searchQuery:o,onSearchChange:c,onChampionSelect:d,onUpdateData:u}=e,m=(0,x.T)(e=>e.activeTab),h=(0,x.T)(e=>e.setActiveTab);async function f(){try{i.oR.promise(async()=>{await (0,n.lA)("delete_champions_cache"),u()},{loading:"Clearing cached data...",success:"Cache cleared successfully, updating champion data",error:"Failed to clear champion cache"})}catch(e){console.error("Error during force update:",e)}}return(0,r.useEffect)(()=>{{let e=localStorage.getItem("activeSkinsTab");e&&h(e)}},[h]),(0,s.jsxs)("div",{"data-tauri-drag-region":!0,onMouseDown:e=>{e.target.closest("[data-tauri-drag-region]")&&!e.target.closest("button, input, [role='button'], [role='combobox']")&&Promise.resolve().then(a.bind(a,1780)).then(e=>{let{getCurrentWebviewWindow:t}=e;t().startDragging().catch(e=>{console.error("Failed to start dragging:",e)})}).catch(e=>{console.error(e)})},className:"flex flex-col w-full mx-auto bg-gradient-to-r from-white/80 via-slate-50/80 to-white/80 dark:from-slate-900/80 dark:via-slate-800/80 dark:to-slate-900/80 backdrop-blur-md border-b border-slate-200/50 dark:border-slate-700/50 shadow-lg",children:[(0,s.jsx)("div",{className:"h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-indigo-500 opacity-60"}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-6 p-4 w-full mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 w-1/3 xl:w-1/4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[(0,s.jsxs)("div",{className:"relative w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg",children:[(0,s.jsx)(N.A,{className:"h-5 w-5 text-white"}),(0,s.jsx)(w.A,{className:"absolute -top-1 -right-1 h-3 w-3 text-yellow-400 animate-pulse"})]}),(0,s.jsx)("div",{className:"hidden md:block",children:(0,s.jsx)("h1",{className:"text-lg font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"FeitanxMoussaid"})})]}),(0,s.jsxs)("div",{className:"relative flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 z-10",children:(0,s.jsx)(et.A,{className:"h-4 w-4 text-slate-400"})}),(0,s.jsx)(eb,{champions:t,onSelect:d,selectedChampionId:l,searchQuery:o,onSearchChange:c})]})]}),(0,s.jsx)("div",{className:"flex items-center justify-center flex-1",children:(0,s.jsx)("div",{className:"bg-white/60 dark:bg-slate-800/60 backdrop-blur-sm rounded-full p-1 border border-slate-200/50 dark:border-slate-700/50 shadow-inner",children:(0,s.jsx)(e9,{value:m,onValueChange:e=>{h(e)},className:"w-full",children:(0,s.jsxs)(e7,{className:"bg-transparent border-0 gap-1 h-auto p-0",children:[(0,s.jsxs)(te,{value:"official",className:"relative px-6 py-2.5 rounded-full font-medium transition-all duration-300 data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-500 data-[state=active]:to-purple-600 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=inactive]:text-slate-600 data-[state=inactive]:hover:text-slate-800 dark:data-[state=inactive]:text-slate-400 dark:data-[state=inactive]:hover:text-slate-200",children:[(0,s.jsx)(N.A,{className:"h-4 w-4 mr-2"}),"Official Skins"]}),(0,s.jsxs)(te,{value:"custom",className:"relative px-6 py-2.5 rounded-full font-medium transition-all duration-300 data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-500 data-[state=active]:to-indigo-600 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=inactive]:text-slate-600 data-[state=inactive]:hover:text-slate-800 dark:data-[state=inactive]:text-slate-400 dark:data-[state=inactive]:hover:text-slate-200",children:[(0,s.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Custom Skins"]})]})})})}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-white/60 dark:bg-slate-800/60 backdrop-blur-sm rounded-full border border-slate-200/50 dark:border-slate-700/50 shadow-sm",children:[(0,s.jsx)(ed,{}),(0,s.jsx)("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 hidden lg:block",children:"Status"})]}),(0,s.jsxs)(ej,{children:[(0,s.jsx)(ey,{asChild:!0,children:(0,s.jsx)(g.$,{variant:"outline",size:"icon","aria-label":"Menu",className:"bg-white/60 dark:bg-slate-800/60 backdrop-blur-sm border-slate-200/50 dark:border-slate-700/50 hover:bg-white/80 dark:hover:bg-slate-700/80 shadow-sm h-10 w-10",children:(0,s.jsx)(ea.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(eN,{className:"min-w-56 bg-white/90 dark:bg-slate-900/90 backdrop-blur-md border-slate-200/50 dark:border-slate-700/50 shadow-xl",align:"end",children:[(0,s.jsx)("div",{className:"px-3 py-2 border-b border-slate-200/50 dark:border-slate-700/50",children:(0,s.jsx)("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Actions"})}),(0,s.jsx)(e3,{}),(0,s.jsxs)(ew,{onClick:()=>{u()},className:"flex items-center gap-3 px-3 py-2.5 hover:bg-blue-50/80 dark:hover:bg-blue-900/20 transition-colors",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:(0,s.jsx)(es.A,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Check for Updates"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Update champion data"})]})]}),(0,s.jsxs)(ew,{onClick:()=>{f()},className:"flex items-center gap-3 px-3 py-2.5 hover:bg-orange-50/80 dark:hover:bg-orange-900/20 transition-colors",disabled:"custom"===m,children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center",children:(0,s.jsx)(es.A,{className:"h-4 w-4 text-orange-600 dark:text-orange-400"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Force Update Data"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Clear cache & update"})]})]}),(0,s.jsxs)("div",{className:"border-t border-slate-200/50 dark:border-slate-700/50 mt-1",children:[(0,s.jsx)(eE,{}),(0,s.jsx)(eV,{})]})]})]}),(0,s.jsx)(eg,{})]})]})]})});var ta=a(9602);function ts(e){let{className:t,value:a,...r}=e;return(0,s.jsx)(ta.bL,{"data-slot":"progress",className:(0,k.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...r,children:(0,s.jsx)(ta.C1,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(null!=a?a:0),"%)")}})})}function tr(e){var t,a,l;let{isOpen:o,onClose:c,progress:d}=e,[u,m]=(0,r.useTransition)(),[h,f]=(0,r.useState)(null),[x,p]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!1);(0,r.useEffect)(()=>{o&&j()},[o]);let j=()=>{p(!0),m(async()=>{try{let e=await (0,n.lA)("check_github_updates");f(e),console.log("Update check result:",e)}catch(e){console.error("Failed to check for updates:",e),i.oR.error("Failed to check for updates")}finally{p(!1)}})};return(0,s.jsx)(O,{open:o,onOpenChange:e=>!e&&c(),children:(0,s.jsxs)(V,{className:"sm:max-w-md",children:[(0,s.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,s.jsxs)(W,{children:[(0,s.jsx)(H,{children:"Data Updates"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground animate-in fade-in-50 duration-300",children:(()=>{if(x)return"Checking for updates...";if(b)return"Updating data...";if(!d)return"Initializing...";switch(d.status){case"checking":return"Checking for updates...";case"downloading":return"Downloading updates...";case"processing":return"Processing ".concat(d.currentChampion,"...");default:return"Processing updates..."}})()})]}),d&&!h&&(0,s.jsxs)("div",{className:"space-y-2 animate-in fade-in-50 duration-300",children:[(0,s.jsx)(ts,{value:d.progress,className:"transition-all duration-300 ".concat(u?"opacity-50":"opacity-100")}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,s.jsxs)("span",{children:[Math.round(d.progress),"%"]}),(0,s.jsxs)("span",{children:[d.processedChampions," of ",d.totalChampions," ","champions"]})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground text-right animate-in slide-in-from-right-5",children:d.currentChampion&&"Currently processing: ".concat(d.currentChampion)})]}),h&&!d&&(0,s.jsxs)("div",{className:"space-y-3 animate-in fade-in-50 duration-300",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Current Version:"}),(0,s.jsx)("span",{className:"font-mono",children:null!=(t=h.current_version)?t:"Not installed"}),(0,s.jsx)("span",{className:"text-muted-foreground",children:"Latest Version:"}),(0,s.jsx)("span",{className:"font-mono",children:null!=(a=h.available_version)?a:"Unknown"})]}),h.has_update?(0,s.jsxs)("div",{className:"rounded-md bg-muted/50 p-3 border border-border",children:[(0,s.jsx)("p",{className:"text-sm font-medium mb-1",children:"Update Available"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-3",children:null!=(l=h.update_message)?l:"New data updates are available for download."}),(0,s.jsx)(g.$,{size:"sm",className:"w-full",disabled:b,onClick:()=>{v(!0),m(async()=>{try{var e,t,a;let s=i.oR.loading("Updating data from GitHub..."),r=await (0,n.lA)("update_champion_data_from_github");i.oR.dismiss(s),r.success?(i.oR.success("Update completed successfully! ".concat(null!=(t=null==(e=r.updatedChampions)?void 0:e.length)?t:0," champions updated.")),f(r)):i.oR.error("Update failed: ".concat(null!=(a=r.error)?a:"Unknown error"))}catch(e){console.error("Failed to update data:",e),i.oR.error("Failed to update data: ".concat(e))}finally{v(!1)}})},children:b?"Updating...":"Update Now"})]}):(0,s.jsxs)("div",{className:"rounded-md bg-muted/50 p-3 border border-border",children:[(0,s.jsxs)("p",{className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-green-500",children:(0,s.jsx)("path",{d:"M20 6L9 17l-5-5"})}),"Data is up to date"]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"You have the latest champion data installed."})]})]}),(x||b)&&!d&&!h&&(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-4",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary mb-2"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:x?"Checking for updates...":"Updating data..."})]})]}),(0,s.jsxs)(J,{className:"mt-4",children:[(0,s.jsx)(g.$,{variant:"outline",size:"sm",onClick:j,disabled:x||b,children:"Check for Updates"}),(0,s.jsx)(g.$,{size:"sm",onClick:c,disabled:b,children:"Close"})]})]})})}function tn(){return(0,s.jsxs)("div",{className:"flex items-center justify-center h-screen w-full flex-col gap-6 bg-gradient-to-br from-background via-muted/30 to-primary/5",children:[(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,s.jsx)("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-primary/5 rounded-full blur-3xl animate-pulse"}),(0,s.jsx)("div",{className:"absolute bottom-1/4 right-1/4 w-48 h-48 bg-purple-500/5 rounded-full blur-3xl animate-pulse delay-1000"}),(0,s.jsx)("div",{className:"absolute top-1/2 left-1/2 w-32 h-32 bg-blue-500/5 rounded-full blur-2xl animate-pulse delay-500"})]}),(0,s.jsxs)("div",{className:"relative z-10 flex flex-col items-center gap-6",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 rounded-full bg-primary/20 blur-xl animate-pulse"}),(0,s.jsx)("div",{className:"relative bg-gradient-to-br from-primary/90 to-purple-600/90 p-4 rounded-2xl shadow-2xl",children:(0,s.jsx)(j.A,{className:"h-12 w-12 animate-spin text-white"})})]}),(0,s.jsxs)("div",{className:"text-center space-y-2",children:[(0,s.jsx)("p",{className:"text-xl font-bold bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:"Loading Champions Data"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Preparing your League experience..."})]}),(0,s.jsx)("div",{className:"flex gap-2",children:[0,1,2].map(e=>(0,s.jsx)("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"".concat(.2*e,"s")}},e))})]})]})}function ti(){let{champions:e,loading:t,error:a,hasData:l}=p(),{updateData:o,isUpdating:c,progress:d}=f(),{leaguePath:u,activeTab:m,favorites:h,toggleFavorite:g}=(0,x.T)(),[j,k]=(0,r.useState)(!1),[C,S]=(0,r.useState)(!1),A=(0,x.T)(e=>e.autoUpdateData);b();let{leaguePath:_,selectedSkins:z,favorites:I}=(0,x.T)();(0,r.useEffect)(()=>{if(!_)return;let e=Array.from(z.values()).map(e=>({champion_id:e.championId,skin_id:e.skinId,chroma_id:e.chromaId,fantome:e.fantome}));(0,n.lA)("save_selected_skins",{leaguePath:_,skins:e,favorites:Array.from(I)}).catch(e=>{console.error(e)})},[_,z,I]);let[R,F]=(0,r.useState)(""),[T,E]=(0,r.useState)(null),D=e.filter(e=>e.name.toLowerCase().includes(R.toLowerCase())).sort((e,t)=>{let a=h.has(e.id),s=h.has(t.id);if(a&&!s)return -1;if(!a&&s)return 1;if(R){let a=e.name.toLowerCase().startsWith(R.toLowerCase()),s=t.name.toLowerCase().startsWith(R.toLowerCase());if(a&&!s)return -1;if(!a&&s)return 1}return e.name.localeCompare(t.name)}),q=e.find(e=>e.id===T),M=async()=>{try{await (0,n.lA)("delete_champions_cache"),await o()}catch(e){console.error("Failed to update data:",e),i.oR.error("Failed to update data")}};return((0,r.useEffect)(()=>{!u||!1!==l||C||c||(S(!0),M().finally(()=>{S(!1)}))},[u,l,C,c]),(0,r.useEffect)(()=>{A&&(async()=>{try{(await (0,n.lA)("check_github_updates")).has_update&&(await (0,n.lA)("update_champion_data_from_github"),i.oR.success("Champion data auto-updated!"))}catch(e){}})()},[A]),u)?!1===l||t||C?(0,s.jsx)(tn,{}):(0,s.jsxs)("div",{className:"flex flex-col h-full w-full bg-gradient-to-br from-background via-muted/10 to-primary/5",children:[(0,s.jsx)("div",{className:"relative z-20",children:(0,s.jsx)(tt,{champions:e,selectedChampionId:T,searchQuery:R,onSearchChange:F,onChampionSelect:E,onUpdateData:()=>{k(!0)}})}),(0,s.jsx)(tr,{isOpen:c||j,progress:d,onClose:()=>{k(!1)}}),(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(tn,{}),children:(0,s.jsxs)("div",{className:"flex flex-1 overflow-hidden w-full mx-auto relative",children:[(0,s.jsxs)("div",{className:"w-1/4 xl:w-1/5 overflow-y-auto scrollbar-hide relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-background/95 via-muted/30 to-background/95 backdrop-blur-sm border-r border-border/50"}),(0,s.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/5 rounded-full blur-2xl"}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-purple-500/5 rounded-full blur-xl"}),(0,s.jsxs)("div",{className:"relative z-10 p-4",children:[(0,s.jsxs)("div",{className:"mb-6 p-4 rounded-xl bg-gradient-to-r from-primary/10 to-purple-500/10 border border-primary/20",children:[(0,s.jsxs)("h2",{className:"text-sm font-semibold text-foreground/90 flex items-center gap-2",children:[(0,s.jsx)(y.A,{className:"h-4 w-4 text-primary"}),"Champions (",D.length,")"]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:Array.isArray(h)&&h.length>0&&"".concat(h.length," favorites")})]}),(0,s.jsx)(L,{champions:D,selectedChampion:T,favorites:h,onSelectChampion:E,onToggleFavorite:g})]})]}),(0,s.jsxs)("div",{className:"w-3/4 xl:w-4/5 flex flex-col overflow-hidden relative",children:[(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,s.jsx)("div",{className:"absolute top-1/4 right-1/4 w-64 h-64 bg-primary/5 rounded-full blur-3xl animate-pulse delay-1000"}),(0,s.jsx)("div",{className:"absolute bottom-1/4 left-1/4 w-48 h-48 bg-purple-500/5 rounded-full blur-3xl animate-pulse delay-2000"})]}),q&&(0,s.jsx)("div",{className:"relative z-10 p-6 border-b border-border/50 bg-gradient-to-r from-background/80 to-muted/40 backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-primary/20 to-purple-500/20 flex items-center justify-center",children:(0,s.jsx)(N.A,{className:"h-6 w-6 text-primary"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-transparent",children:q.name}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"official"===m?"Official Skins":"Custom Skins"})]})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto relative z-10",children:(0,s.jsx)("div",{className:"p-6",children:q?"official"===m?(0,s.jsx)(P,{champion:q}):(0,s.jsx)(ee,{championId:T}):(0,s.jsx)("div",{className:"flex items-center justify-center h-full min-h-[400px]",children:(0,s.jsxs)("div",{className:"text-center space-y-4 max-w-md",children:[(0,s.jsx)("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-muted/50 to-muted/30 flex items-center justify-center mx-auto",children:(0,s.jsx)(w.A,{className:"h-8 w-8 text-muted-foreground/60"})}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-foreground/80",children:"Select a Champion"}),(0,s.jsx)("p",{className:"text-muted-foreground leading-relaxed",children:"Choose a champion from the sidebar to view and manage their skins"})]})})})})]})]})})]}):(0,s.jsx)(v,{})}}},e=>{var t=t=>e(e.s=t);e.O(0,[346,929,528,318,511,685,15,358],()=>t(2468)),_N_E=e.O()}]);